# TODO - Add production recipes when ready
---
discoverReaders:
  name: 'Discover Readers'
  description: 'Discover available readers that you can connect to with the Terminal SDK.'
  steps:
    -
      description: Discover your card reader(s) by using the terminal.discoverReaders method.
      name: discoverReaders
      args: []
      requiredMatchParameters:
        - name
      type: promise
    -
      description: Stripe Terminal SDK calls the onActivationToken handler (implemented by your code) to fetch a reader activation token. THis should return a promise
      name: onFetchConnectionToken
      args: []
      requiredMatchParameters:
        - name
      type: event
    -
      description: Your onFetchConnectionToken handler returns a promise, and now the SDK will discover readers for your Stripe account
      name: onFetchConnectionToken
      args: []
      requiredMatchParameters:
        - type
        - name
      type: promise-resolve
    -
      description: Using the activation token, terminal.discoverReaders returns with the list of available readers to connect to.
      name: discoverReaders
      args: []
      response:
        discoveredReaders:
          object: terminal.reader
          status: offline
      requiredMatchParameters:
        - type
        - name
        - response
      type: promise-resolve
connect:
  name: 'Connect to Reader'
  description: 'See how to an available reader'
  steps:
    -
      description: Call terminal.connect(reader) to connect to an available reader.
      name: connect
      args:
        -
          object: terminal.reader
      requiredMatchParameters:
        - type
        - name
        - args.0.object
      type: promise
    -
      description: The Stripe SDK will call your onConnectionStatusChange handler. Use this to display updates to the Terminal connection status.
      name: onConnectionStatusChange
      args:
        -
          status: connecting
      requiredMatchParameters:
        - type
        - name
        - args.0.status
      type: event
    -
      description: The Stripe SDK will call your onConnectionStatusChange handler when the Terminal is connected
      name: onConnectionStatusChange
      args:
        -
          status: connected
      requiredMatchParameters:
        - type
        - name
        - args.0.status
      type: event
    - description: terminal.connect's promise resolves with a reader object.
      name: connect
      args:
        -
          object: terminal.reader
      requiredMatchParameters:
        - type
        - name
        - args.0.object
      type: promise-resolve
addItem:
  name: 'Add 3 Line Items'
  description: 'See how to add 3 line items to the Stripe Terminal Device'
  steps:
    -
      description: Call terminal.beginCheckout with a Cart Object
      name: beginCheckout
      args:
        -
          transactionId: 'some-id'
      requiredMatchParameters:
        - type
        - name
        - args.0.transactionId
      type: promise
    -
      description: Call terminal.setCart with the Cart object that contains the line items you want to display.
      name: setCart
      args:
        -
          cart:
            lineItems:
              - description: Silver Hat
              - totalPrice: 2000
              - unitPrice: 1000
              - quantity: 2
          totals:
            total: 2000
            tax: 140
            balanceDue: 2140
      requiredMatchParameters:
        - type
        - name
        - args.0.lineItems
        - args.0.totals
      type: promise
    -
      description: Call terminal.beginCheckout with a Cart Object
      name: beginCheckout
      args: []
      requiredMatchParameters:
        - type
        - name
      type: promise-resolve
    -
      description: terminal.setCart will resolve with a promise either contains an empty object ({}) or an error
      name: setCart
      args: []
      requiredMatchParameters:
        - type
        - name
      type: promise-resolve
